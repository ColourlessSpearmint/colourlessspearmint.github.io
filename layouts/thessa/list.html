{{ define "resources" }} {{ $thessaCss := resources.Get "thessa.css" | minify }}
<link rel="stylesheet" href="{{ $thessaCss.Permalink }}" />
{{ $thessaJs := resources.Get "thessa.js" | minify }}
<script src="{{ $thessaJs.Permalink }}"></script>
{{ end }}

{{ define "main" }}
<div id="thessa-container" class="initial-state">

    <div class="header-container">
        <div class="header-title">
            <h1>Thessa</h1>
            <div class="header-icons">
                <svg id="thessa-info-btn" class="info-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" title="About Thessa">
                    <circle cx="12" cy="12" r="10"></circle>
                    <line x1="12" y1="16" x2="12" y2="12"></line>
                    <line x1="12" y1="8" x2="12.01" y2="8"></line>
                </svg>
                <svg id="settings-btn" class="info-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" title="Settings (API Key)">
                    <circle cx="12" cy="12" r="3"></circle>
                    <path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"></path>
                </svg>
            </div>
        </div>
        <div class="input-area">
            <input type="text" id="word-input" placeholder="Discover a word..." autocomplete="off" />
            <button id="generate-btn" title="Generate">
                <svg class="btn-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><polyline points="9 18 15 12 9 6"></polyline></svg>
            </button>
        </div>
    </div>

    <div id="loading-container" style="display: none;">
        <div class="loading-spinner"></div>
        <p id="loading-text">Contacting Gemini...</p>
    </div>

    <div id="results-area" class="results-area">
        <!-- All results will be appended here by JS -->
    </div>

    <p id="message-box" class="message-box" style="display: none;"></p>
</div>

<div id="hover-popover"></div>

<!-- Modals and copy notification -->
<div id="about-thessa-modal" class="modal-overlay">
    <div class="modal-content">
        <button class="modal-close-btn" id="about-modal-close-btn" aria-label="Close modal">×</button>
        <h3>About Thessa</h3>
        <p>Thessa is your AI-powered thesaurus.</p>
        <p>Enter a word to discover its definition, etymology, synonyms, antonyms, and even cognates in other languages. Click on any data point to copy it. Hover over a synonym, antonym, or cognate to see its definition.</p>
        <p>To use Thessa, you'll need a <a href="https://aistudio.google.com/app/apikey" target="_blank" rel="noopener noreferrer">Google Gemini API key</a>. This key is stored securely in your browser's local storage. Manage your key via the settings icon (⚙️).</p>
        <p style="font-size: 0.85em; opacity: 0.7"><em>Powered by <a href="https://ai.google.dev/gemini-api" target="_blank" rel="noopener noreferrer">Google Gemini API</a></em></p>
    </div>
</div>

<div id="apiKeyModal" class="modal-overlay">
    <div class="modal-content">
        <button class="modal-close-btn" id="apiKeyModalCloseBtn" aria-label="Close API Key modal">×</button>
        <h3>Enter Your API Key</h3>
        <p>Thessa requires a Gemini API key to function. You can create one at <a href="https://aistudio.google.com/app/apikey" target="_blank" rel="noopener noreferrer">Google AI Studio</a>.</p>
        <div class="api-key-modal-input-container">
            <input type="password" id="apiKeyInput" placeholder="Your Gemini API Key" />
            <label for="apiKeyInput">Your key is stored locally and never sent anywhere except to Google's API.</label>
        </div>
        <button id="saveApiKeyBtn">Save</button>
        <p id="apiKeyError" class="message-box error-message" style="display: none; margin-top: 15px;"></p>
    </div>
</div>

<div id="copy-notification" class="copy-notification">Copied to clipboard!</div>
{{ end }}