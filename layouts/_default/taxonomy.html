{{ define "main" }}
<h1 class="animated">{{ .Title }}</h1>
<article class="animated">
    {{ with index .Site.Data.tags (.Title | urlize) }} {{ if .definition }}
    <p class="definition">{{ .definition }}</p>
    {{ end }} {{ if .text }}
    <p>{{ .text | safeHTML }}</p>
    {{ end }} {{ end }}
    <nav class="button-links">
        {{ range (where .Pages "Params.unlisted" "ne" true).ByDate.Reverse }} {{
        $post := . }} {{ $minRead := math.Ceil (div (countwords $post.Content)
        200.0) }}
        <a class="button-link" href="{{ .Permalink | relURL }}">
            <span class="content">
                <span class="title">{{ .Title }}</span>
                <span class="description">
                    {{ .Date.Format "January 2, 2006" }} {{ if gt $minRead 1 }}
                    Â· {{ $minRead }} min read{{ end }}
                </span>
            </span>
            <span class="tags">
                {{ range .Params.tags }}
                <span class="tag">{{ . }}</span>
                {{ end }}
            </span>
        </a>
        {{ end }}
    </nav>
</article>
{{ end }}
